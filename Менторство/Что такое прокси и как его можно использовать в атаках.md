
прокси - это некий компьютер между отправителем и принимающим запросы. 

для чего нужный прокси сервера:
1. контроль трафика, его безопасности, безопасности инфраструктуры
2. ускорение работы
3. фильтрация контента
4. блокировка нежелательных ресурсов

с развитием интернета прокси начал использоваться шире:
1. администраторы придумывали новые способы
2. прокси можно использоваться в нападении
3. можно скрываться за прокси для анонимности

прокси меняет IP, обеспечивая анонимность. 

блокировка сайтов, для ограничения доступа к ресурсам. в корпорациях, например, порно, рекламы, казино, соц сетей.

ускорение работы: нагруженный сервер ускоряется прокси с помощью кэширования данных

сейчас часто делают ферму из прокси. ферма распределяет весь трафик. 

распределённую ddos атаку можно остановить, потому что они идут из конкретных ASN. Пусть в ботнете будет 1миллион устройст. они управляются из какого-то центра. если устройства подвержены уязвимости, они могут находится в одной стране, городе, вместе. можно заблокирвоать ASN выходящего шлюза, чтобы все эти устройства стали недоступны. можно дополнительным прокси маршрутизировать и управлять трафик, собирать их IP, фильтровать конкретные собранные IP.

прокси фильтрует контент, нежелательные сайты, рекламу. отслеживает запросы сотрудников. отслеживает через DLP активность пользователя в интернете. DLP защищают от утечек. на прокси можно вешать KPI инфраструктуру для криптографической защиты

прокси бывают: DNS, на конкретный трафик, на конкретный порт. разработчики могут хотеть наблюдать на трафиком для разработки, для этого популярны Burp и Zap.

в атаках используется так. можно развернуть в разных сегментах сети. через них можно делать огромные цепи атак, которые будут перебрасывать на разные сайты, в том числе настроящие, красть сессию, куки. в инфре можно маршрутизировать трафик так, чтобы внутри сети поднимать свой сервер, направляеть на него маршрутизация и подслушивать пользователей. в вебе прокси часто используется для фишинга данных, сессий и тд.

раньше через фишинг могли воровать аккаунты вконтакте. можно было вычислить IP (как это сделать через NAT?) пользователя. взломать его роутер, пробросить порты, слушать трафик его роутера. сейчас можно использовать облака, когда раньше тупые хакеры использовали свои собственные локальные сети. 

сегодня такая атака очень сложно реализуем. роутеры стали умнее, люди меняют пароли. прокси сейчас используется чаще для перехвата запросов в вебе от себя к серверу. 

разработчики могут не знать, что пользователь может контролировать хедеры и куки.

через прокси можно направлять трафик в разные сети. есть глобальные сети, есть оверлейные: впн и пиринговые.

мы имеет http прокси (кэширование, контроль доступа); 
имеем HTTPS прокси - с помощью него можно рассекречивать данные пользователя через собственный сертификат
есть SSL прокси - создаёт только одно TCP соединение. (когда http создаёт 2 TCP соединения). преимущество в том, что можно использовать этот прокси для доступа как к http так и к https
есть CGI прокси - используется в веб браузере, выглядит как обычный сайт. по URL прокси CGI отображает результат. работает по веб форму с ssl
есть SOCK Proxy - используется очень часто хакерами. используется для задач с интенсивным трафиком. использует TCP для получения пакетов. Способен туннелирования, в том числе для пиринговых сетей. Обеспечивает хорошую анонимность. Используется, например, в TOR, в пиринговых сетях (примеры). 

прокси различаются по типам: централизованные (точка) и распределённые (фермы и децентрализация).

по степени анонимности:
1. прозрачные - прозрачный трафик, все знают что куда и как перенаправляется. все данные видны.
2. анонимные - меняют IP, но не скрывают факт использования прокси.
3. искажающие - меняют IP и данные о пользователи
4. скрывающие - постоянно меняют IP, скрывают данные о пользователе и меняют адрес подключения.

по доступности:
1. публичные - всеобщие. они нагружены, небезопасны, медленны, ненадёжны.
2. приватные - быстрее, безопаснее, могут обеспечивать WAF, могут быть как платными, так и встроенными.
3. выделенные - позволяют подключать и отправлять запросы 1 клиенту: VPN.
4. прозрачные
5. общие - доступны группе пользователей, например, сотрудникам одной компании

пользуются: тестировщики, программисты, компании, маркетологи и тд

ключевое отличие от VPN в том, что VPN не может быть прокси. VPN - это полноценный тунель между клиентом и (клиентом/сервером). обычно это оверлейная сеть - сеть поверх сети. Они также работают на разных уровнях OSI.

самые популярные протоколы VPN: Ipsec, (и ещё 2)
у банков могут быть лицензированные у ФСБ протоколы шифрования.
Прокси имеет кучу протоколов: shadow socks и тд (примеры). прокси очень гибкий. он может создавать тунели на подконтрольных уровнях OSI.

прокси может использоваться в хакинге, например, при захвате web сервера, развернуть, и нюхать данные некоторое время. это очень скрытая атака. 